<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>UAE Expo Pavilions 3D Lesson</title>
<style>
html,body {margin:0; padding:0; height:100%; font-family: sans-serif; background: linear-gradient(180deg,#f0f9ff,#ffffff);}
#container {width:100%; height:100vh; position:relative; overflow:hidden;}
canvas {display:block;}
.caption {position:absolute; right:20px; top:20px; background: rgba(0,0,0,0.6); color:white; padding:10px 14px; border-radius:10px; max-width:300px; font-size:14px; box-shadow:0 4px 12px rgba(0,0,0,0.3);}
.controls {position:absolute; left:20px; top:20px; display:flex; gap:8px; z-index:10;}
.btn {background:white; padding:8px 12px; border-radius:8px; border:none; font-weight:600; cursor:pointer;}
.ui {position:absolute; bottom:18px; left:50%; transform:translateX(-50%); display:flex; gap:10px; z-index:10;}
.dot {width:14px; height:14px; border-radius:50%; border:2px solid rgba(255,255,255,0.9); background:transparent; cursor:pointer;}
.dot.active {background:white;}
</style>
</head>
<body>
<div id="container"></div>
<div class="controls">
<button id="prevBtn" class="btn">◀ Prev</button>
<button id="nextBtn" class="btn">Next ▶</button>
</div>
<div class="caption" id="caption">Loading...</div>
<div class="ui" id="dots"></div>

<script src="https://unpkg.com/three@0.152.2/build/three.min.js"></script>
<script src="https://unpkg.com/three@0.152.2/examples/js/controls/OrbitControls.js"></script>
<script>
(function(){
const container = document.getElementById('container');
const captionEl = document.getElementById('caption');
const dotsEl = document.getElementById('dots');
const prevBtn = document.getElementById('prevBtn');
const nextBtn = document.getElementById('nextBtn');

const pavilions = [
  {title:'Expo 1970 — Osaka', year:1970, text:'Early Emirati participation introducing crafts and trade.', img:'data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/2wCEAAkGBxMTERUTExMWFhUXFxcYGBgYFxcaGBgYFxgXGBkYGBcYHSggGBolGxgXITEhJSkrLi4uGB8zODMsNygtLisBCgoKDg0OGxAQGy0mICYtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLf/AABEIALcBEwMBIgACEQEDEQH/xAAbAAABBQEBAAAAAAAAAAAAAAAFAQIDBAYAB//EADgQAAIBAwIEBAMGBwAAAAAAAAECEQADBBIhMQVBUWFxgZGx0fAykfAHFCMyUrHh8SOR/8QAGAEBAQEBAQAAAAAAAAAAAAAAAAECAwT/xAAhEQEBAQEBAAICAwEAAAAAAAAAAQIRITEDEkFRBBNhwf/aAAwDAQACEQMRAD8A+0iIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIf//Z'},
  {title:'Expo 2000 — Hannover', year:2000, text:'Large pavilion showing heritage and modern achievements.', img:'data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/2wCEAAkGBxISEhISEhIVEhIVFRUVFRUVFRUVFRUWFhUWFhUVFRUYHSggGBolHRUVITEhJSkrLi4uFx8zODMsNygtLisBCgoKDg0OGhAQGi0fHyUtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLf/AABEIAMIBAwMBIgACEQEDEQH/xAAcAAABBQEBAQAAAAAAAAAAAAAFAgMEBgcAAQj/xABFEAACAQIEAwYEAwYDBQAAAAABAgADEQQSITEFQVEGEyJhcYGRBxRCkbHB0fAHI1JicpKi0vEkQ1NzgpLxJDNj4f/EABgBAQEBAQEAAAAAAAAAAAAAAAABAgME/8QAHxEBAQEBAQACAwEAAAAAAAAAAAERAhIhMUFRcTJR/9oADAMBAAIRAxEAPwD9AiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICf/2Q=='},
  {title:'Expo 2010 — Shanghai', year:2010, text:'Dune-inspired pavilion with gold reflective skin.', img:'data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/2wCEAAkGBxISEhISEhIWFRUVFRUVFRUVFRUVFRUVFRUWFxUVFRUYHSggGBolGxUVITEhJSkrLi4uFx8zODMtNygtLisBCgoKDg0OGxAQGy0mICYtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLf/AABEIALcBEwMBIgACEQEDEQH/xAAbAAACAwEBAQAAAAAAAAAAAAAABQIDBAYAB//EADYQAAIBAwMCBAQDBwUAAAAAAAECAwAEEQUSITFBBhMiUWFxkQYUMoGRobHR8BMiwfEVFiQz/8QAGAEBAQEBAQAAAAAAAAAAAAAAAAECAwT/xAAdEQEBAQEBAQEAAwAAAAAAAAAAAQIRAyExQSIU/9oADAMBAAIRAxEAPwD9AiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIg//Z'},
  {title:'Expo 2015 — Milan', year:2015, text:'Shaded streets and canyon-like interior for sustainability.', img:'data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBxISEhUSEhIVFhUVFRUVFRUVFRUVFRUVFRUWFhUVFRUYHSggGBolGxUVITEhJSkrLi4uFx8zODMtNygtLisBCgoKDg0OGhAQGi0fHyUtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLf/AABEIALcBEwMBIgACEQEDEQH/xAAbAAABBQEBAAAAAAAAAAAAAAAFAgMEBgcAAf/EADkQAAIBAgQDBgUEAgMAAAAAAAECAwQRAAUSITFBBhMiUWFxgZEHFDJCscHR8AYjUuHx/8QAGAEBAQEBAQAAAAAAAAAAAAAAAAECAwT/xAAhEQEBAQEAAgMBAQEAAAAAAAAAAQIRIQMSMUFRImFx8P/aAAwDAQACEQMRAD8A+0iIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICf/2Q=='},
  {title:'Expo 2017 — Astana', year:2017, text:'Energy diversification and renewables pavilion.', img:'data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/2wCEAAkGBxISEhISEhMWFhUVFRUVFRUVFRUVFRUVFRUXFhUVFRUYHSggGBolHRUVITEhJSkrLi4uFx8zODMtNygtLisBCgoKDg0OGhAQGy0mICYtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLf/AABEIALcBEwMBIgACEQEDEQH/xAAcAAABBQEBAQAAAAAAAAAAAAAFAgMEBgcAAQj/xABFEAACAQIEAwYDBwUAAAAAAAECAwQREgUhMUFRE2FxgZEHFCMykbHRI0JSssHR8CPhFqLxJDNj4f/EABgBAQEBAQEAAAAAAAAAAAAAAAABAgME/8QAHxEBAQEBAQEBAQAAAAAAAAAAAQIRITEDEkFRcf/aAAwDAQACEQMRAD8A+0iIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICf/2Q=='},
  {title:'Expo 2020 — Dubai', year:2021, text:'Falcon pavilion with movable wings and solar integration.', img:'data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/2wCEAAkGBxISEhISEhMWFhUVFRUVFRUVFRUVFRUVFRUXFhUVFRUYHSggGBolHRUVITEhJSkrLi4uFx8zODMtNygtLisBCgoKDg0OGhAQGy0mICYtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLf/AABEIALcBEwMBIgACEQEDEQH/xAAcAAACAgMBAQAAAAAAAAAAAAAFBgMEAAIHAQj/xABFEAACAQIDBAYGBQYEBwAAAAABAgADEQQSITEFBkFRYXETIjJScYGRobHB0SNCUmKx0fAjM4Ky8TRDU4LS/8QAGAEBAQEBAQAAAAAAAAAAAAAAAAECAwT/xAAiEQEBAQEAAwACAwAAAAAAAAAAAQIRITEDEkFRYXH/2gAMAwEAAhEDEQA/ANiIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICf/2Q=='}
];

const scene = new THREE.Scene();
scene.fog = new THREE.FogExp2(0xeaf6ff,0.02);

const camera = new THREE.PerspectiveCamera(45,window.innerWidth/window.innerHeight,0.1,1000);
camera.position.set(0,2.2,10);

const renderer = new THREE.WebGLRenderer({antialias:true, alpha:true});
renderer.setSize(window.innerWidth, window.innerHeight);
container.appendChild(renderer.domElement);

const ambient = new THREE.AmbientLight(0xffffff,0.85);
scene.add(ambient);
const dir = new THREE.DirectionalLight(0xffffff,0.7);
dir.position.set(5,10,5);
scene.add(dir);

const controls = new THREE.OrbitControls(camera,renderer.domElement);
controls.enablePan=false;
controls.enableZoom=false;
controls.autoRotate=false;
controls.enableDamping=true;
controls.dampingFactor=0.07;
controls.minPolarAngle=0.4;
controls.maxPolarAngle=1.4;

let panels=[];
const spacing=6;
let currentIndex=0;

function buildDots(){
  dotsEl.innerHTML='';
  pavilions.forEach((p,i)=>{
    const d=document.createElement('div');
    d.className='dot'+(i===0?' active':'');
    d.addEventListener('click',()=>{goToIndex(i);});
    dotsEl.appendChild(d);
  });
}
function updateCaption(i){
  captionEl.innerHTML='<strong>'+pavilions[i].title+'</strong><br/><small>'+pavilions[i].year+'</small><br/>'+pavilions[i].text;
}

function goToIndex(i){
  currentIndex=i;
  targetX=i*spacing;
  Array.from(dotsEl.children).forEach((el,idx)=>el.classList.toggle('active',idx===i));
  updateCaption(i);
}

prevBtn.addEventListener('click',()=>goToIndex((currentIndex-1+pavilions.length)%pavilions.length));
nextBtn.addEventListener('click',()=>goToIndex((currentIndex+1)%pavilions.length));

buildDots();
updateCaption(0);
let targetX=0;

// create panels
const loader=new THREE.TextureLoader();
pavilions.forEach((p,i)=>{
  const tex=loader.load(p.img);
  const geo=new THREE.PlaneGeometry(5.2,3.2);
  const mat=new THREE.MeshStandardMaterial({map:tex});
  const mesh=new THREE.Mesh(geo,mat);
  mesh.position.set(i*spacing,0.2,0);
  mesh.userData={floatOffset:Math.random()*Math.PI*2, baseY:mesh.position.y};
  scene.add(mesh);
  panels.push(mesh);
});

// ground
const groundGeo=new THREE.PlaneGeometry(200,200);
const groundMat=new THREE.MeshStandardMaterial({color:0xf2f9ff,roughness:1,metalness:0});
const ground=new THREE.Mesh(groundGeo,groundMat);
ground.rotation.x=-Math.PI/2;
ground.position.y=-2.5;
scene.add(ground);

function animate(time){
  requestAnimationFrame(animate);
  panels.forEach((m,idx)=>{
    const t=performance.now()/1000+m.userData.floatOffset;
    m.position.y=m.userData.baseY+Math.sin(t*0.9)*0.18;
    m.rotation.y=Math.sin(t*0.6)*0.08*((idx%2)?1:-1);
  });
  camera.position.x+=(targetX-camera.position.x)*0.08;
  camera.position.y=2.2+Math.sin(performance.now()/1200)*0.08;
  const lookAtPoint=new THREE.Vector3(targetX/2,0.2,0);
  camera.lookAt(lookAtPoint);
  controls.update();
  renderer.render(scene,camera);
}
animate(0);

window.addEventListener('resize',()=>{
  camera.aspect=window.innerWidth/window.innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(window.innerWidth,window.innerHeight);
});
</script>
</body>
</html>
